<% if @user.teacher? && @user.no_connections_with?(current_user) %>

<div id = "connect_button">
  <%= button_to "Connect", { :controller => "connections",:action => "create", :connections => {:teacher_id => @user.id, :student_id => session[:user_id]}}, class: "btn btn-primary", remote: true %>
</div>

<% elsif @user.teacher? && @user.connected_and_approved?(current_user) %>

  <%= render :partial => 'messages/message_button', :locals => {:recipient => @user} %>

<% else %>

  <p><%= "Awaiting connection approval from #{@user.name}."%></p>

<% end %>
